{% extends theme('layouts/page.html') %}
{% from theme("data/conference-schedule-day1.html") import schedule as schedule_day1 %}
{% from theme("data/conference-schedule-day2.html") import schedule as schedule_day2 %}
{%
  set page = {
      'title'               : ''
    , 'description'         : ''
    , 'sections'            : [    
      ('past-highlights',          'dark'),
      ('schedule',          'white'),
      ('tickets', 'white'),
      ('testimonials',          'dark'),
      ('venue-summary',          'white'),
      ('sponsors-summary', '')
    ]
  }
%}

{% block navtype %}
<div id="nav-home">
<nav class="navbar navbar-default fill-white" id="site-nav" role="navigation">
  <div class="container-fluid sitebar">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand green smooth-scroll" href="#circularheader">droidconIN</a>
    </div>

    <div class="collapse navbar-collapse navbar-ex1-collapse">
      <ul class="nav navbar-nav">
        <li><a href="#highlights" class="smooth-scroll">Highlights</a></li>
        <li><a href="#schedules" class="smooth-scroll">Schedule</a></li>
        <li><a href="#tickets" class="smooth-scroll">Tickets</a></li>
        <li><a href="#sponsors" class="smooth-scroll">Sponsors</a></li>
        <li><a target="_blank" href="https://jobs.hasgeek.com/search?q=android">Jobs</a></li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
          <ul class="dropdown-menu">        
            <li><a href="#about" class="smooth-scroll">About HasGeek</a></li>
            <li><a href="code-of-conduct">Code of conduct</a></li>
          </ul>
        </li>
      </ul>
    </div>  
  </div>
</nav>
</div>
{% endblock %}

{% block banner %}
<header id="circularheader">
  <div class="logo-bck">
    <img src="{{ theme_static('img/logo.png') }}" alt="">
  </div>
  <div class="container text-center">
    <h1 class="legible">droidconIN 2016</h1>
    <h3 class="large">10 - 11 November 2016</h3>
    <h3 class="secondary">MLR Convention Centre, JP Nagar, Bangalore</h3>
    <p>
    <a class="button tiny ticket-button smooth-scroll" href="#tickets">Buy Tickets</a>
    <a class="button tiny ticket-button smooth-scroll" href="sponsorship" target="_blank">Become a sponsor</a>
    </p>
    <p class="legible link-silent space-one"><a href="#annoucements" class="smooth-scroll icon-chevron-down scroll-down hidden-xs"></a></p>
  </div>
</header>
{% endblock %}

{% block footerscripts %}
<style type="text/css">
  #boxoffice-widget .boxoffice-button-action {
    background-color: #FAA51A;
    border-color:  #d98f15;
    color: #fff;
  }
  #boxoffice-widget .boxoffice-button-info {
    background-color: #5BC0DE;
    border-color: #2A9CBE;
    color: #fff;
  }
  #boxoffice-widget .payment-stages-bg {
    background-color: #586152;
  }
  #boxoffice-widget .progress-indicator>li {
    color: #FFF;
  }
  #boxoffice-widget .progress-indicator>li.active, .progress-indicator > li.active .bubble {
    color: #aed581;
  }
  #boxoffice-widget .category-heading {
    background-color: #71BF44;
    border-bottom: 3px solid #586152;
    color: rgba(0,0,0,0.6);
    line-height: 1.1;
    font-weight: bold;
  }
  #boxoffice-widget .category-heading:after {
    border-color: #71BF44 transparent #71BF44 #71BF44;
  }
</style>
        
<script>
  $(function(){
    //Boxoffice widget
    var boxofficeUrl = "https://boxoffice.hasgeek.com";
    var username, userphone, useremail;
    {% if g.user %}
      {% if g.user.fullname %}
        username = "{{ g.user.fullname }}";
      {% endif %}
      {% if g.user.phone %}
        userphone = "{{ g.user.phone }}";
      {% endif %}
      useremail = "{{ g.user.email }}";
    {% endif %}
    $.get({
      url: boxofficeUrl+"/api/1/boxoffice.js",
      crossDomain: true
    }).done(function(data) {
      var boxofficeScript = document.createElement('script');
      boxofficeScript.innerHTML = data.script;
      document.getElementsByTagName('body')[0].appendChild(boxofficeScript);
      window.Boxoffice.init({
        org: 'hasgeek',
        itemCollection: '25f48cf5-5afc-11e6-b09e-5580be063711',
        user_name: username,
        user_phone: userphone,
        user_email: useremail,
        paymentDesc: 'droidconIN 2016'
      });

    }).fail(function(response) {
      var error_msg;
      if (response.readyState === 4) {
        error_msg = "Server error, please try again later";
      }
      else if (response.readyState === 0) {
        if(!navigator.onLine) {
          error_msg = "Unable to connect. There is no network!";
        }
        else {
          error_msg = "<p>Unable to connect. If you are behind a firewall or using any script blocking extension (like Privacy Badger).<p></p> Please ensure your browser can load boxoffice.hasgeek.com, api.razorpay.com and checkout.razorpay.com</p>";
        }
      }
      $('#boxoffice-widget p').html(error_msg);
    });
  });
</script>
{% endblock %}
